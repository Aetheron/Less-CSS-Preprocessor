<?php

/**
 * Implements hook_menu().
 */
function less_demo_menu() {
  $items = array();

  $items['admin/config/development/less/demo'] = array(
    'title' => 'LESS Demo',
    'description' => 'Demonstration for less features',
    'page callback' => '_less_demo_page',
    'access arguments' => array(LESS_PERMISSION),
    'type' => MENU_LOCAL_TASK,
    'weight' => 1,
  );

  return $items;
}

/**
 * Implements hook_admin_paths().
 */
function less_demo_admin_paths() {
  return array(
    'admin/config/development/less/demo' => FALSE,
  );
}

/**
 * Implements hook_less_variables().
 * 
 * Variables returned by this function are cached.
 * 
 * @see less_demo_less_variables_alter().
 */
function less_demo_less_variables() {
  return array(
    '@test' => '#ccc',
  );
}

/**
 * Implements hook_less_variables_alter().
 * 
 * @param $less_variables
 * @param $system_name
 */
function less_demo_less_variables_alter($less_variables, $system_name) {
  // dpm(func_get_args());
}

/**
 * Implements hook_less_functions().
 */
function less_demo_less_functions() {
  return;
  return array(
    'url' => function ($args) {
      return 'blarg';
    },
  );
}

/**
 * Implements hook_less_functions_alter().
 * 
 * @param $less_functions
 * @param $system_name
 */
function less_demo_less_functions_alter($less_functions, $system_name) {
  // dpm(func_get_args());
}

function urlreplacement($args, $less) {
  return 'blarg';
}

function _less_demo_page() {
  
  $file_less_settings = array(
    'variables' => array(
      '@gradient_end' => '#bada55',
    ),
  );
  
  drupal_add_css(drupal_get_path('module', 'less_demo') . '/styles/less_demo.drupal_add_css.css.less', array('less' => $file_less_settings));
  
  return '<div id="less_demo_gradient"><div class="less_demo_logo"></div><p>This is some text.</p></div>';
}
